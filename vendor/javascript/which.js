// which@2.0.2 downloaded from https://ga.jspm.io/npm:which@2.0.2/which.js

import t from"path";import n from"isexe";import o from"process";var s={};var e=o;const c="win32"===e.platform||"cygwin"===e.env.OSTYPE||"msys"===e.env.OSTYPE;const r=t;const h=c?";":":";const i=n;const getNotFoundError=t=>Object.assign(new Error(`not found: ${t}`),{code:"ENOENT"});const getPathInfo=(t,n)=>{const o=n.colon||h;const s=t.match(/\//)||c&&t.match(/\\/)?[""]:[...c?[e.cwd()]:[],...(n.path||e.env.PATH||"").split(o)];const r=c?n.pathExt||e.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"";const i=c?r.split(o):[""];c&&-1!==t.indexOf(".")&&""!==i[0]&&i.unshift("");return{pathEnv:s,pathExt:i,pathExtExe:r}};const which=(t,n,o)=>{if("function"===typeof n){o=n;n={}}n||(n={});const{pathEnv:s,pathExt:e,pathExtExe:c}=getPathInfo(t,n);const h=[];const step=o=>new Promise((e,c)=>{if(o===s.length)return n.all&&h.length?e(h):c(getNotFoundError(t));const i=s[o];const l=/^".*"$/.test(i)?i.slice(1,-1):i;const a=r.join(l,t);const p=!l&&/^\.[\\\/]/.test(t)?t.slice(0,2)+a:a;e(subStep(p,o,0))});const subStep=(t,o,s)=>new Promise((r,l)=>{if(s===e.length)return r(step(o+1));const a=e[s];i(t+a,{pathExt:c},(e,c)=>{if(!e&&c){if(!n.all)return r(t+a);h.push(t+a)}return r(subStep(t,o,s+1))})});return o?step(0).then(t=>o(null,t),o):step(0)};const whichSync=(t,n)=>{n=n||{};const{pathEnv:o,pathExt:s,pathExtExe:e}=getPathInfo(t,n);const c=[];for(let h=0;h<o.length;h++){const l=o[h];const a=/^".*"$/.test(l)?l.slice(1,-1):l;const p=r.join(a,t);const E=!a&&/^\.[\\\/]/.test(t)?t.slice(0,2)+p:p;for(let t=0;t<s.length;t++){const o=E+s[t];try{const t=i.sync(o,{pathExt:e});if(t){if(!n.all)return o;c.push(o)}}catch(t){}}}if(n.all&&c.length)return c;if(n.nothrow)return null;throw getNotFoundError(t)};s=which;which.sync=whichSync;var l=s;export default l;

